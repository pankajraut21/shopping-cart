<h2 class="cart-title">Cart</h2>

<div *ngIf="cartItems.length === 0" class="empty-cart">
  Your cart is empty.
</div>

<form [formGroup]="cartForm" class="cart-form">
  <div *ngFor="let item of cartItems" class="cart-item">
    <img [src]="item?.thumbnail" alt="{{ item?.title }}" class="cart-image" />

    <div class="item-details">
      <h3 class="item-title">{{ item?.title }}</h3>
      <p class="item-price">Price: ${{ item?.price }}</p>
      <span *ngIf="item?.discountPercentage" class="badge">
        Discount: {{ item?.discountPercentage }}%
      </span>
      <div class="item-quantity">
        <input 
          [formControlName]="item.id.toString()"
          type="number" 
          min="0"
        />
        <button (click)="removeFromCart(item?.id)" class="remove-button">Remove</button>
      </div>
    </div>
  </div>
</form>

<div class="total-price">
  <ng-container *ngIf="totalPrice$ | async as totalPrice; else totalPriceZero">
    <h3>Total Price: ${{ totalPrice.toFixed(2) }}</h3>
  </ng-container>
  <ng-template #totalPriceZero>
    <h3>Total Price: 0.00</h3>
  </ng-template>
</div>
